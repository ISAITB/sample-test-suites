<?xml version="1.0" encoding="UTF-8"?>
<testcase id="testCase2_send" xmlns="http://www.gitb.com/tdl/v1/" xmlns:gitb="http://www.gitb.com/core/v1/">
    <metadata>
        <gitb:name>[TC2] Send purchase order</gitb:name>
        <gitb:version>1.0</gitb:version>
        <gitb:description>Test case to test that an EU retailer system can correctly send a purchase order.</gitb:description>
    </metadata>
    <imports>
        <artifact type="schema" encoding="UTF-8" name="purchaseOrderXSD">resources/PurchaseOrder.xsd</artifact>
    </imports>
    <actors>
        <gitb:actor id="Retailer" name="Retailer" role="SUT"/>
        <gitb:actor id="SimulatedRetailer" name="Simulated retailer"/>
    </actors>
    <steps>
        <assign to="httpHeaders{Content-Type}">"text/plain"</assign>
        <receive id="dataReceived" desc="Receive request" from="Retailer" to="SimulatedRetailer" handler="HttpMessagingV2">
            <input name="uriExtension">"/receiveOrder"</input>
            <input name="method">"POST"</input>
            <input name="status">200</input>
            <input name="body">"REF-0123456789"</input>
            <input name="headers">$httpHeaders</input>
        </receive>
        <verify handler="XmlValidator" desc="Validate purchase order">
            <input name="xml">$dataReceived{request}{body}</input>
            <input name="xsd">$purchaseOrderXSD</input>
        </verify>
    </steps>
    <output>
        <success>
            <default>"Test session succeeded."</default>
        </success>    
        <failure>
            <default>"Test session failed. Refer to the failed step's report for more details."</default>
        </failure>    
    </output>
</testcase>